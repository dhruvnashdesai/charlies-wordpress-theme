// ==========================================================================
// Cart Styles - Charlie's Theme
// Matching dipski.co dark theme
// ==========================================================================

@use 'variables' as *;
@use 'mixins' as *;

// --------------------------------------------------------------------------
// Cart Page Layout
// --------------------------------------------------------------------------

.woocommerce-cart {
	.woocommerce {
		padding: $spacing-8 0 $spacing-16;
	}
}

// --------------------------------------------------------------------------
// Cart Table
// --------------------------------------------------------------------------

.woocommerce-cart-form {
	margin-bottom: $spacing-8;
}

table.shop_table.cart {
	width: 100%;
	border-collapse: collapse;
	background-color: $color-bg-card;
	border-radius: $border-radius;
	overflow: hidden;

	thead {
		display: none;

		@include md {
			display: table-header-group;
		}

		th {
			padding: $spacing-4;
			text-align: left;
			font-size: $font-size-sm;
			font-weight: $font-weight-semibold;
			text-transform: uppercase;
			letter-spacing: 0.05em;
			color: $color-muted;
			border-bottom: 1px solid $color-border;

			&.product-remove {
				width: 50px;
			}

			&.product-thumbnail {
				width: 100px;
			}

			&.product-quantity {
				width: 120px;
			}
		}
	}

	tbody {
		tr {
			display: block;
			padding: $spacing-4;
			border-bottom: 1px solid $color-border;

			@include md {
				display: table-row;
				padding: 0;
			}

			&:last-child {
				border-bottom: none;
			}
		}

		td {
			display: flex;
			align-items: center;
			padding: $spacing-2 0;

			@include md {
				display: table-cell;
				padding: $spacing-4;
				vertical-align: middle;
			}

			&::before {
				content: attr(data-title);
				font-weight: $font-weight-semibold;
				margin-right: auto;
				text-transform: uppercase;
				font-size: $font-size-xs;
				color: $color-muted;

				@include md {
					display: none;
				}
			}
		}

		// Remove button
		.product-remove {
			order: 4;

			@include md {
				order: unset;
			}

			a.remove {
				display: flex;
				align-items: center;
				justify-content: center;
				width: 30px;
				height: 30px;
				color: $color-muted;
				font-size: $font-size-xl;
				line-height: 1;
				transition: color $transition-fast;

				&:hover {
					color: #ef4444;
				}
			}
		}

		// Thumbnail
		.product-thumbnail {
			order: 1;

			@include md {
				order: unset;
			}

			a {
				display: block;
			}

			img {
				width: 80px;
				height: 80px;
				object-fit: cover;
				border-radius: $border-radius-sm;
			}
		}

		// Product name
		.product-name {
			order: 2;
			flex: 1;

			@include md {
				order: unset;
			}

			a {
				font-weight: $font-weight-semibold;
				color: $color-white;

				&:hover {
					color: $color-accent;
				}
			}

			.variation {
				display: block;
				margin-top: $spacing-1;
				font-size: $font-size-sm;
				color: $color-muted;

				dt,
				dd {
					display: inline;
					margin: 0;
				}

				dt {
					font-weight: $font-weight-normal;

					&::after {
						content: ': ';
					}
				}

				p {
					margin: 0;
				}
			}
		}

		// Price
		.product-price {
			order: 3;

			@include md {
				order: unset;
			}

			.woocommerce-Price-amount {
				font-weight: $font-weight-semibold;
			}
		}

		// Quantity
		.product-quantity {
			order: 5;

			@include md {
				order: unset;
			}

			.quantity {
				display: flex;
				align-items: center;
				background-color: $color-bg;
				border: 1px solid $color-border;
				border-radius: $border-radius-sm;

				input {
					width: 50px;
					height: 40px;
					text-align: center;
					background: transparent;
					border: none;
					color: $color-white;
					font-weight: $font-weight-medium;
					-moz-appearance: textfield;

					&::-webkit-outer-spin-button,
					&::-webkit-inner-spin-button {
						-webkit-appearance: none;
					}
				}
			}
		}

		// Subtotal
		.product-subtotal {
			order: 6;

			@include md {
				order: unset;
			}

			.woocommerce-Price-amount {
				font-weight: $font-weight-bold;
				color: $color-accent;
			}
		}
	}

	// Actions row
	.actions {
		display: flex;
		flex-wrap: wrap;
		gap: $spacing-4;
		padding: $spacing-4;
		background-color: $color-bg;

		@include md {
			display: table-cell;
			padding: $spacing-4;
		}

		.coupon {
			display: flex;
			flex: 1;
			gap: $spacing-2;

			label {
				@include visually-hidden;
			}

			input[type="text"] {
				flex: 1;
				min-width: 150px;
				padding: $spacing-2 $spacing-3;
				background-color: $color-bg-card;
				border: 1px solid $color-border;
				border-radius: $border-radius-sm;
				color: $color-white;

				&:focus {
					outline: none;
					border-color: $color-accent;
				}

				&::placeholder {
					color: $color-muted;
				}
			}

			button {
				@include button-outline;
				padding: $spacing-2 $spacing-4;
			}
		}

		button[name="update_cart"] {
			@include button-outline;
			margin-left: auto;

			&:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}
		}
	}
}

// --------------------------------------------------------------------------
// Cart Collaterals (Totals)
// --------------------------------------------------------------------------

.cart-collaterals {
	@include md {
		display: flex;
		justify-content: flex-end;
	}

	.cart_totals {
		@include card;
		padding: $spacing-6;
		width: 100%;

		@include md {
			max-width: 400px;
		}

		> h2 {
			font-size: $font-size-lg;
			font-weight: $font-weight-semibold;
			margin-bottom: $spacing-4;
			padding-bottom: $spacing-4;
			border-bottom: 1px solid $color-border;
		}

		table {
			width: 100%;
			margin-bottom: $spacing-6;

			tr {
				th,
				td {
					padding: $spacing-3 0;
					border-bottom: 1px solid $color-border;
				}

				th {
					text-align: left;
					font-weight: $font-weight-normal;
					color: $color-muted;
				}

				td {
					text-align: right;
				}

				&.order-total {
					th,
					td {
						border-bottom: none;
						padding-top: $spacing-4;
						font-weight: $font-weight-bold;
						font-size: $font-size-lg;
					}

					td {
						color: $color-accent;
					}
				}
			}

			.woocommerce-shipping-destination {
				font-size: $font-size-sm;
				color: $color-muted;
			}

			.shipping-calculator-button {
				font-size: $font-size-sm;
				color: $color-accent;

				&:hover {
					text-decoration: underline;
				}
			}
		}
	}

	.wc-proceed-to-checkout {
		a.checkout-button {
			@include button-primary;
			display: block;
			width: 100%;
			text-align: center;
			padding: $spacing-4;
			font-size: $font-size-base;
		}
	}
}

// --------------------------------------------------------------------------
// Empty Cart
// --------------------------------------------------------------------------

.cart-empty {
	text-align: center;
	padding: $spacing-12 0;

	&::before {
		content: 'ðŸ›’';
		display: block;
		font-size: 64px;
		margin-bottom: $spacing-4;
	}
}

.return-to-shop {
	margin-top: $spacing-6;

	a {
		@include button-primary;
	}
}

// --------------------------------------------------------------------------
// Mini Cart (Header Widget)
// --------------------------------------------------------------------------

.widget_shopping_cart {
	.woocommerce-mini-cart {
		list-style: none;
		padding: 0;
		margin: 0;

		&__empty-message {
			padding: $spacing-4;
			text-align: center;
			color: $color-muted;
		}
	}

	.woocommerce-mini-cart-item {
		display: flex;
		align-items: center;
		gap: $spacing-3;
		padding: $spacing-3;
		border-bottom: 1px solid $color-border;

		&:last-child {
			border-bottom: none;
		}

		a.remove {
			order: 3;
			color: $color-muted;
			font-size: $font-size-lg;

			&:hover {
				color: #ef4444;
			}
		}

		a:not(.remove) {
			display: flex;
			align-items: center;
			gap: $spacing-3;
			flex: 1;

			img {
				width: 50px;
				height: 50px;
				object-fit: cover;
				border-radius: $border-radius-sm;
			}
		}

		.quantity {
			font-size: $font-size-sm;
			color: $color-muted;
		}
	}

	.woocommerce-mini-cart__total {
		padding: $spacing-4;
		border-top: 1px solid $color-border;
		font-weight: $font-weight-semibold;

		.woocommerce-Price-amount {
			float: right;
			color: $color-accent;
		}
	}

	.woocommerce-mini-cart__buttons {
		display: flex;
		gap: $spacing-2;
		padding: $spacing-4;
		padding-top: 0;

		a {
			flex: 1;
			text-align: center;
			padding: $spacing-2 $spacing-3;
			font-size: $font-size-sm;

			&.wc-forward:not(.checkout) {
				@include button-outline;
			}

			&.checkout {
				@include button-primary;
			}
		}
	}
}
